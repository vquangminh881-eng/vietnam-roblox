<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Roblox ‚Ä¢ Redeem (Mobile Demo ‚Äî Anonymous)</title>
<style>
  :root{
    --accent:#00a2ff;
    --bg:linear-gradient(180deg,#eaf4ff 0%, #f9fbff 100%);
    --card:#fff;
  }
  *{box-sizing:border-box}
  body{ margin:0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial; background:var(--bg); color:#0f1724; -webkit-font-smoothing:antialiased;}
  .wrap{ max-width:460px; margin:0 auto; padding:12px; min-height:100vh; display:flex; flex-direction:column; gap:12px; }

  /* Topbar */
  .topbar{ display:flex; align-items:center; gap:10px; padding:10px; background:#071028; color:#fff; border-radius:12px; }
  .topbar img{ width:44px; height:44px; object-fit:cover; border-radius:8px; transform:rotate(-12deg); }
  .topbar .title{ font-weight:800; font-size:15px; letter-spacing:0.4px; }

  /* Cards */
  .card{ background:var(--card); border-radius:14px; padding:14px; box-shadow:0 10px 30px rgba(3,16,56,0.06); }
  .center{ display:flex; align-items:center; justify-content:center; flex-direction:column; gap:8px; }

  /* Inputs & buttons */
  input[type="text"], input[type="password"]{
    width:100%; padding:12px 14px; border-radius:10px; border:1px solid #e6eefb; font-size:15px; background:#fbfdff;
  }
  .btn{ width:100%; padding:12px; border-radius:10px; border:none; font-weight:800; font-size:15px; cursor:pointer; background:var(--accent); color:#fff; }
  .btn.ghost{ background:transparent; border:1px solid #e6eefb; color:#0f1724; font-weight:700; }

  /* Dashboard */
  .dash-row{ display:flex; align-items:center; justify-content:space-between; gap:10px; }
  .dash-left{ display:flex; flex-direction:column; }
  .dash-name{ font-weight:900; font-size:16px; letter-spacing:0.2px; }
  .dash-sub{ font-size:13px; color:#64748b; }
  .balance{ font-weight:900; color:#0f766e; font-size:18px; }

  /* Redeem box */
  .redeem-row{ display:flex; gap:8px; margin-top:10px; }
  .code-input{ font-family:monospace; letter-spacing:2px; text-transform:uppercase; padding:10px; border-radius:10px; border:1px solid #eef4ff; flex:1; }

  /* Loader + spinner */
  .spinner{ width:56px; height:56px; border-radius:12px; display:flex; align-items:center; justify-content:center; background:linear-gradient(180deg,#fff,#eef8ff); box-shadow:0 8px 20px rgba(3,16,56,0.06); }
  .spinner.spin{ animation:spin 1.1s linear infinite; }
  @keyframes spin{ from{transform:rotate(0)} to{transform:rotate(360deg)} }
  .progress{ height:10px; background:#eef6ff; border-radius:8px; overflow:hidden; margin-top:8px; }
  .bar{ height:100%; width:0%; background:linear-gradient(90deg,#00b4ff,#0066ff); transition:width .4s; }

  /* Verify modal */
  .overlay{ position:fixed; left:0; top:0; right:0; bottom:0; background:rgba(2,6,23,0.6); display:none; align-items:center; justify-content:center; z-index:9999; padding:12px; }
  .modal{ width:100%; max-width:420px; background:#fff; border-radius:12px; padding:12px; box-shadow:0 20px 50px rgba(2,6,23,0.4); }
  .verify-grid{ display:grid; grid-template-columns:repeat(3,1fr); gap:8px; margin-top:10px; }
  .tile{ height:70px; background:#f8fbff; border-radius:8px; display:flex; align-items:center; justify-content:center; cursor:pointer; border:2px solid transparent; }
  .tile.sel{ border-color:var(--accent); box-shadow:0 8px 20px rgba(3,16,56,0.06); }

  /* Robux fly */
  .fly{ position:fixed; z-index:8888; width:40px; height:40px; border-radius:8px; display:flex; align-items:center; justify-content:center; font-weight:800; pointer-events:none; }

  /* small text */
  .muted{ font-size:13px; color:#64748b; }

  @media (max-width:420px){
    .wrap{ padding:10px; }
  }
</style>
</head>
<body>
<div class="wrap">

  <!-- Topbar -->
  <div class="topbar">
    <img src="/mnt/data/CD385DC0-4E06-4ECD-85CE-367F20BA31C8.jpeg" alt="logo">
    <div>
      <div class="title">ROBLOX ‚Ä¢ Redeem (Mobile Demo)</div>
      <div style="font-size:11px; opacity:0.9">Anonymous demo ‚Äî kh√¥ng g·ª≠i d·ªØ li·ªáu</div>
    </div>
  </div>

  <!-- LOGIN CARD (anonymity: still allow username but no avatar shown) -->
  <div id="loginCard" class="card center">
    <div style="width:100%; text-align:left;"><div style="font-weight:900; font-size:18px">ƒêƒÉng nh·∫≠p (Demo)</div></div>
    <div style="width:100%;" class="muted">Nh·∫≠p t√™n gi·∫£ ƒë·ªÉ hi·ªÉn th·ªã t√™n (t·ª± ƒë·ªông ·∫©n danh, kh√¥ng upload avatar)</div>
    <input id="inputUser" type="text" placeholder="Username (b·∫•t k·ª≥)">
    <input id="inputPass" type="password" placeholder="Password (demo, kh√¥ng g·ª≠i)">
    <button class="btn" onclick="doLoginMobile()">Log in & Continue</button>
    <button class="btn ghost" style="margin-top:6px" onclick="skipLoginMobile()">Proceed without login</button>
    <div class="muted" style="margin-top:8px">D·ªØ li·ªáu l∆∞u t·∫°i tr√¨nh duy·ªát (localStorage). An to√†n & offline.</div>
  </div>

  <!-- DASHBOARD CARD -->
  <div id="dashCard" class="card" style="display:none">
    <div class="dash-row">
      <div class="dash-left">
        <div class="dash-name" id="displayName">Anonymous</div>
        <div class="dash-sub">T√†i kho·∫£n demo (·∫©n danh)</div>
      </div>
      <div style="text-align:right">
        <div class="muted" style="font-size:12px">S·ªë d∆∞</div>
        <div class="balance" id="balanceText">0 Robux</div>
      </div>
    </div>

    <!-- Redeem area -->
    <div class="redeem-box" style="margin-top:12px; padding:12px; background:linear-gradient(180deg,#fff,#f7fbff); border-radius:12px;">
      <div style="display:flex; gap:8px; align-items:center;">
        <input id="redeemInput" class="code-input" type="text" placeholder="XXXX-XXXX-XXXX-XXXX" maxlength="19">
        <button class="btn" style="flex:0 0 120px" onclick="startRedeem()">Redeem</button>
      </div>
      <div style="margin-top:10px;">
        <div id="loaderArea" style="display:none">
          <div style="display:flex; gap:10px; align-items:center;">
            <div id="spinner" class="spinner"><img src="/mnt/data/CD385DC0-4E06-4ECD-85CE-367F20BA31C8.jpeg" style="width:36px;height:36px;transform:rotate(6deg)"></div>
            <div style="flex:1">
              <div class="progress"><div id="bar" class="bar"></div></div>
              <div id="progressText" class="muted" style="margin-top:8px">Validating code...</div>
            </div>
          </div>
        </div>

        <div id="redeemResult" style="margin-top:10px; font-weight:800"></div>
      </div>
    </div>
  </div>

</div>

<!-- Verification modal -->
<div id="overlay" class="overlay">
  <div class="modal">
    <div style="display:flex; align-items:center; justify-content:space-between">
      <div style="font-weight:900">Quick Security Check</div>
      <div style="font-size:12px; color:#64748b">Demo</div>
    </div>
    <div class="muted" style="margin-top:6px">Ch·ªçn t·∫•t c·∫£ √¥ c√≥ h√¨nh vu√¥ng m√†u xanh.</div>
    <div id="verifyGrid" class="verify-grid"></div>
    <div style="display:flex; justify-content:flex-end; gap:8px; margin-top:12px;">
      <button class="btn ghost" onclick="closeVerify()">Cancel</button>
      <button id="verifyBtn" class="btn" onclick="submitVerify()" disabled>Verify</button>
    </div>
  </div>
</div>

<script>
/* =========================
   Mobile single-file demo
   - anonymous (no avatar visible)
   - localStorage username & balance
   - initial balance 0
   - after redeem balance -> 9,999
   - loading + verify modal + robux fly + sound (cha-ching short)
   ========================= */

const LOGO_PATH = '/mnt/data/CD385DC0-4E06-4ECD-85CE-367F20BA31C8.jpeg'; // dev-provided path

/* Input formatting for redeem code */
const redeemInput = document.getElementById('redeemInput');
redeemInput.addEventListener('input', e=>{
  const v = e.target.value.toUpperCase().replace(/[^A-Z0-9]/g,'');
  const parts = v.match(/.{1,4}/g);
  e.target.value = parts ? parts.join('-') : '';
});

/* Helper: show/hide screens */
function showDashboard(){
  document.getElementById('loginCard').style.display = 'none';
  document.getElementById('dashCard').style.display = 'block';
  // update name + balance from localStorage
  const name = localStorage.getItem('demo_user') || 'Anonymous';
  const balance = localStorage.getItem('demo_balance') || '0';
  document.getElementById('displayName').textContent = name;
  document.getElementById('balanceText').textContent = Number(balance).toLocaleString() + ' Robux';
}
function showLogin(){
  document.getElementById('loginCard').style.display = 'flex';
  document.getElementById('dashCard').style.display = 'none';
}

/* LOGIN (safe) */
function doLoginMobile(){
  const u = document.getElementById('inputUser').value.trim();
  const p = document.getElementById('inputPass').value;
  if(!u){
    alert('Nh·∫≠p username (b·∫•t k·ª≥) ƒë·ªÉ ti·∫øp t·ª•c.');
    return;
  }
  // save username but remain anonymous visually optional: we'll display the name (text only), without avatar
  localStorage.setItem('demo_user', u);
  // initial balance 0
  localStorage.setItem('demo_balance', '0');
  // brief fake login animation
  const btn = event?.target || null;
  showDashboard();
}

/* Skip login */
function skipLoginMobile(){
  localStorage.setItem('demo_user', 'Anonymous');
  localStorage.setItem('demo_balance', '0');
  showDashboard();
}

/* Redeem flow: validate format -> open verify modal */
const redeemRegex = /^[A-Z0-9]{4}-[A-Z0-9]{4}-[A-Z0-9]{4}-[A-Z0-9]{4}$/;
let pendingRedeem = null;
function startRedeem(){
  const code = document.getElementById('redeemInput').value.trim().toUpperCase();
  const resultEl = document.getElementById('redeemResult');
  resultEl.textContent = '';
  if(!redeemRegex.test(code)){
    resultEl.style.color = 'red';
    resultEl.textContent = '‚ùå Invalid code format. Use XXXX-XXXX-XXXX-XXXX';
    return;
  }
  // store and open verify modal
  pendingRedeem = code;
  openVerify();
}

/* VERIFY modal logic */
function openVerify(){
  const overlay = document.getElementById('overlay');
  overlay.style.display = 'flex';
  const grid = document.getElementById('verifyGrid');
  grid.innerHTML = '';
  const total = 9;
  const required = 3;
  const correct = [];
  while(correct.length < required){
    const r = Math.floor(Math.random()*total);
    if(!correct.includes(r)) correct.push(r);
  }
  for(let i=0;i<total;i++){
    const t = document.createElement('div');
    t.className = 'tile';
    if(correct.includes(i)){
      t.innerHTML = '<div style="width:34px;height:34px;background:#1e90ff;border-radius:6px"></div>';
      t.dataset.correct='1';
    } else {
      t.innerHTML = '<div style="font-size:12px;color:#94a3b8">Tile</div>';
    }
    t.addEventListener('click', ()=>{
      t.classList.toggle('sel');
      checkVerify(required);
    });
    grid.appendChild(t);
  }
  document.getElementById('verifyBtn').disabled = true;
}
function closeVerify(){ document.getElementById('overlay').style.display = 'none'; pendingRedeem = null; }
function checkVerify(required){
  const selected = document.querySelectorAll('.tile.sel');
  document.getElementById('verifyBtn').disabled = selected.length < required;
}
function submitVerify(){
  const tiles = Array.from(document.querySelectorAll('.tile'));
  const selected = tiles.filter(t=>t.classList.contains('sel'));
  const correctSel = selected.filter(t=>t.dataset.correct==='1').length;
  const required = tiles.filter(t=>t.dataset.correct==='1').length;
  if(correctSel >= required){
    closeVerify();
    performRedeem(pendingRedeem);
    pendingRedeem = null;
  } else {
    alert('Verification failed. Try again.');
  }
}

/* performRedeem: loader animation -> success -> set balance to 9999 */
function performRedeem(code){
  const loader = document.getElementById('loaderArea');
  const spinner = document.getElementById('spinner');
  const bar = document.getElementById('bar');
  const progressText = document.getElementById('progressText');
  const resultEl = document.getElementById('redeemResult');

  loader.style.display = 'block';
  spinner.classList.add('spin');
  bar.style.width = '0%';
  progressText.textContent = 'Validating code...';
  resultEl.textContent = '';

  const steps = [
    {t:600, text:'Checking server...'},
    {t:800, text:'Verifying format...'},
    {t:900, text:'Applying code...'},
    {t:700, text:'Finalizing...'}
  ];
  let i=0; let pct=0;
  function step(){
    if(i >= steps.length){
      bar.style.width = '100%';
      spinner.classList.remove('spin');
      setTimeout(()=> {
        loader.style.display = 'none';
        // success: set to 9,999
        const newBal = 9999;
        localStorage.setItem('demo_balance', String(newBal));
        document.getElementById('balanceText').textContent = newBal.toLocaleString() + ' Robux';
        resultEl.style.color = '#0f766e';
        resultEl.innerHTML = `<div style="font-weight:900">‚úÖ Redeem th√†nh c√¥ng! You received <b>${newBal.toLocaleString()}</b> Robux.</div>
          <div style="margin-top:8px"><button class="btn" onclick="claimMobile(${newBal})">Claim Robux</button></div>`;
        // play short cha-ching sound
        playShortChing();
      }, 420);
      return;
    }
    const s = steps[i];
    pct += Math.floor(100/steps.length);
    bar.style.width = pct + '%';
    progressText.textContent = s.text;
    i++;
    setTimeout(step, s.t);
  }
  setTimeout(step, 300);
}

/* claim animation: robux flying + final message */
function claimMobile(amount){
  // spawn fly icons to top-left logo area
  const topbar = document.querySelector('.topbar').getBoundingClientRect();
  const count = 10;
  for(let i=0;i<count;i++){
    const el = document.createElement('div');
    el.className = 'fly';
    el.style.background = 'linear-gradient(180deg,#ffd66a,#ffb14d)';
    el.textContent = 'R';
    document.body.appendChild(el);
    const startX = window.innerWidth/2 + (Math.random()*140 - 70);
    const startY = window.innerHeight/2 + (Math.random()*90 - 45);
    el.style.left = startX + 'px';
    el.style.top = startY + 'px';
    (function(e){
      const dx = (topbar.left + topbar.width/2) - startX + (Math.random()*40-20);
      const dy = (topbar.top + topbar.height/2) - startY + (Math.random()*30-10);
      const duration = 800 + Math.random()*700;
      const start = performance.now();
      function frame(now){
        const t = Math.min(1, (now - start)/duration);
        const ease = t<.5 ? 4*t*t*t : 1 - Math.pow(-2*t+2,3)/2;
        e.style.left = (startX + dx*ease) + 'px';
        e.style.top = (startY + dy*ease) + 'px';
        e.style.transform = `scale(${1 - 0.6*ease}) rotate(${ease*360}deg)`;
        if(t < 1) requestAnimationFrame(frame);
        else e.remove();
      }
      requestAnimationFrame(frame);
    })(el);
  }
  // final toast
  const res = document.getElementById('redeemResult');
  res.innerHTML = `<div style="font-weight:900; font-size:16px">üéâ Claimed <span style="color:#0f766e">${amount.toLocaleString()}</span> Robux!</div>
    <div style="font-size:12px; color:#64748b; margin-top:6px">This is a local demo ‚Äî no real Robux were transferred.</div>`;
  // victory sound
  playVictory();
}

/* SOUNDS (choice 1: short cha-ching) - WebAudio */
let audioCtx = null;
function ensureAudio(){
  if(!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
}
function playShortChing(){
  try{
    ensureAudio();
    const t = audioCtx.currentTime;
    const g = audioCtx.createGain(); g.gain.value = 0.06; g.connect(audioCtx.destination);
    const o = audioCtx.createOscillator(); o.type='sine';
    o.frequency.setValueAtTime(880, t);
    o.frequency.exponentialRampToValueAtTime(1320, t + 0.14);
    o.connect(g);
    o.start();
    o.stop(t + 0.18);
  }catch(e){}
}
function playVictory(){
  try{
    ensureAudio();
    const t = audioCtx.currentTime;
    const g = audioCtx.createGain(); g.gain.value = 0.05; g.connect(audioCtx.destination);
    [440,660,880].forEach((f,i)=>{
      const o = audioCtx.createOscillator();
      o.type='triangle';
      o.frequency.setValueAtTime(f, t + i*0.03);
      o.connect(g);
      o.start(t + i*0.03);
      o.stop(t + 0.4 + i*0.06);
    });
  }catch(e){}
}

/* Init: if user saved -> show dashboard (anonymous) */
window.addEventListener('load', ()=>{
  const u = localStorage.getItem('demo_user');
  if(u){
    showDashboard();
  } else {
    showLogin();
  }
});
</script>
</body>
</html>
